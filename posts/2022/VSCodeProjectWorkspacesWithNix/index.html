<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Project Specific VSCode Setup with Nix-shell</title>
  <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css"/>
  <link rel="stylesheet" href="pico.min.css">
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body>
  <nav class="container-fluid">
  <ul>
    <li>
      <a href="/" class="contrast"><strong>Ashley Arthur</strong></a
      >
    </li>
  </ul>

  <ul>
    <li><a href="/archive">Archive</a></li>
    <li><a href="https://github.com/ash30">Github</a></li>
    <li><a href="https://uk.linkedin.com/in/ash30">Linkedin</a></li>
  </ul>
  </nav>
  <main class="container">
  	
<hgroup>
<h1>

Project Specific VSCode Setup with Nix-shell

</h1>
	<time datetime="2022-12-01">01 December 2022</time>
</hgroup>

  	<p><span class="firstcharacter">D</span>ependencies, dependencies, dependencies! The inescapable reality of our code bases today is that of a collaborative existence.</p>
<p>Since the concept of sharing code spans every layer of the stack, it's not unsurprising that we've created a diverse and disjointed set of tools to handle them. My poison of choice ? Nix ! Because it holds the promise of a unified solution to dependency hell.</p>
<p>I can use nix to manage my dependencies for Android development as equally as I can a cloud native micro service, for local dev setups all the way to production boxes. Whether the full gamut of usage is a good idea? I'm still yet to fully decide - being but an apprentice of Nix as of the time of writing.</p>
<p>One example of the power of nix is how I can manage my VSCode setup. Generally I work in a poly glot environment, using many different tech stacks so vscode accumulates lots of disparate plugins. Seeing them all present and having to enable/disable them manually is slightly nauseating so I use <code>nix-shell</code> to setup vscode specifically for each project I'm working on. The following example loads my dendron setup only when I need it.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span><br>  pkgs <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token operator">&lt;</span>nixpkgs<span class="token operator">></span> <span class="token punctuation">{</span><br>        config<span class="token punctuation">.</span>allowUnfree <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  extensions <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">with</span> pkgs<span class="token punctuation">.</span>vscode<span class="token operator">-</span>extensions<span class="token punctuation">;</span> <span class="token punctuation">[</span> ms<span class="token operator">-</span>python<span class="token punctuation">.</span>python <span class="token comment">/* ... */</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><br>	<span class="token operator">++</span> pkgs<span class="token punctuation">.</span>vscode<span class="token operator">-</span>utils<span class="token punctuation">.</span>extensionsFromVscodeMarketplace <span class="token punctuation">[</span><br>		<span class="token punctuation">{</span><br>		  name <span class="token operator">=</span> <span class="token string">"dendron"</span><span class="token punctuation">;</span><br>		  publisher <span class="token operator">=</span> <span class="token string">"dendron"</span><span class="token punctuation">;</span><br>		  version <span class="token operator">=</span> <span class="token string">"0.103.0"</span><span class="token punctuation">;</span><br>		  sha256 <span class="token operator">=</span> <span class="token string">"pJ3aZ5Yh/pIBWiHHs1V4JxdYxK+f17xRvPR+DXfHgVM="</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>		<span class="token punctuation">{</span><br>		  name <span class="token operator">=</span> <span class="token string">"dendron-markdown-preview-enhanced"</span><span class="token punctuation">;</span><br>		  publisher <span class="token operator">=</span> <span class="token string">"dendron"</span><span class="token punctuation">;</span><br>		  version <span class="token operator">=</span> <span class="token string">"0.10.57"</span><span class="token punctuation">;</span><br>		  sha256 <span class="token operator">=</span> <span class="token string">"sha256-uJmdsC+nKCkAJVH+szNepPcyfHD4ZQ83on195jjqZig="</span><span class="token punctuation">;</span><br>		<span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br>  vscode <span class="token operator">=</span> pkgs<span class="token punctuation">.</span>vscode<span class="token operator">-</span><span class="token keyword">with</span><span class="token operator">-</span>extensions<span class="token punctuation">.</span>override <span class="token punctuation">{</span> vscodeExtensions <span class="token operator">=</span> extensions<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">in</span><br>pkgs<span class="token punctuation">.</span>mkShell <span class="token punctuation">{</span><br>    allowUnfree <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><br>    name <span class="token operator">=</span> <span class="token string">"node"</span><span class="token punctuation">;</span><br>    buildInputs <span class="token operator">=</span> <span class="token punctuation">[</span><br>        pkgs<span class="token punctuation">.</span>nodejs<span class="token operator">-</span>16_x<br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br>    nativeBuildInputs <span class="token operator">=</span> <span class="token punctuation">[</span><br>	    vscode<br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br>    shellHook <span class="token operator">=</span> <span class="token string">''</span><br>        alias code<span class="token operator">=</span><span class="token string">"code --user-data-dir ~/Library/Application Support/code/user/PROJECT_NAME"</span><br>    <span class="token string">''</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Dendron is actually a really good example of something I don't want enabled all the time. The extension's recommended usage mandates the installation of other extension and takes over previewing certain content types. And even if Vscode was to come out tomorrow with an amazing new UI to manage extensions, its doesn't matter, Nix offers a universal set of tools to manage this which allows me to stop having to relearn the wheel in every different part of the stack.</p>
 
  </main>

</body>
